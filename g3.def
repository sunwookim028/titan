BootStrap: docker
From: nvcr.io/nvidia/cuda:12.4.1-cudnn-devel-ubuntu22.04

%post
    export DEBIAN_FRONTEND=noninteractive

    # Install dependencies for Python and add-apt-repository
    apt-get update && apt-get install -y software-properties-common curl gnupg tzdata

    # Set timezone non-interactively
    ln -fs /usr/share/zoneinfo/Etc/UTC /etc/localtime
    dpkg-reconfigure --frontend noninteractive tzdata

    # Add deadsnakes PPA for Python 3.12
    add-apt-repository -y ppa:deadsnakes/ppa
    apt-get update

    # Install Python 3.12 and pip
    apt-get install -y python3.12 python3.12-dev python3.12-venv

    # Set python3.12 as default
    update-alternatives --install /usr/bin/python3 python3 /usr/bin/python3.12 1
    ln -sf /usr/bin/python3 /usr/bin/python

    # Install pip for Python 3.12
    curl -sS https://bootstrap.pypa.io/get-pip.py | python


%environment

%runscript
    echo "This is a container for AISys users."
    exec "$@"
    # You can add any default command you want to run when the container is executed

%labels
    Author JAEYONG
    Version 1.0
    Description "Environment for GNN Researcher"
    Maintainer JAEYONG
    License "MIT"
